<Project>
  <PropertyGroup Condition="'$(TestsRunningOutsideOfRepo)' == 'true'">
    <Nullable>enable</Nullable>
    <ImplicitUsings>enable</ImplicitUsings>

    <!-- Arcade doesn't support such test runner yet. -->
    <!-- https://github.com/dotnet/arcade/issues/15654 -->
    <!-- But setting it this way prevents Arcade from importing XUnit.targets which is done for xUnit v2 -->
    <TestRunnerName>Xunit3</TestRunnerName>
  </PropertyGroup>

  <PropertyGroup>
    <!-- 
      Test applications have their own way of referencing Aspire.Hosting.AppHost, as well as DCP and Dashboard, so we disable
      the Aspire.AppHost.SDK targets that will automatically add these references to projects. 
    -->
    <SkipAddAspireDefaultReferences Condition="'$(TestsRunningOutsideOfRepo)' != 'true'">true</SkipAddAspireDefaultReferences>
  </PropertyGroup>

  <!-- IsAspireHost property might not be available here, so allow infering that from the project name -->
  <ImportGroup Condition="'$(RepoRoot)' != 'null' and '$(TestsRunningOutsideOfRepo)' != 'true' and ($(MSBuildProjectName.EndsWith('AppHost')) or '$(IsAspireHost)' == 'true')">
    <Import Project="$(RepoRoot)src/Aspire.Hosting.AppHost/build/Aspire.Hosting.AppHost.props" Condition="Exists('$(RepoRoot)src/Aspire.Hosting.AppHost/build/Aspire.Hosting.AppHost.props')" />
  </ImportGroup>
</Project>
